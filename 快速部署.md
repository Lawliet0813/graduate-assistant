# âš¡ å¿«é€Ÿéƒ¨ç½²æŒ‡å—

> 10 åˆ†é˜å…§å®Œæˆå…è²»é›²ç«¯éƒ¨ç½²

## ğŸ“‹ æº–å‚™å·¥ä½œ

### 1. å¿…è¦å¸³è™Ÿï¼ˆå…¨éƒ¨å…è²»ï¼‰

- [ ] **GitHub** å¸³è™Ÿï¼ˆç”¨æ–¼ç¨‹å¼ç¢¼è¨—ç®¡ï¼‰
- [ ] **Vercel** å¸³è™Ÿï¼ˆç”¨æ–¼éƒ¨ç½² Next.jsï¼‰
- [ ] **Supabase** å¸³è™Ÿï¼ˆç”¨æ–¼ PostgreSQLï¼‰
- [ ] **Render** å¸³è™Ÿï¼ˆç”¨æ–¼ Python æœå‹™ï¼‰

### 2. API Keys

- [ ] **Google OAuth**ï¼ˆGoogle Cloud Consoleï¼‰
- [ ] **OpenAI API Key**ï¼ˆå¯é¸ï¼ŒèªéŸ³è½‰æ–‡å­—ï¼‰
- [ ] **Anthropic API Key**ï¼ˆå¯é¸ï¼ŒAI åŠ©æ‰‹ï¼‰
- [ ] **Notion API Key**ï¼ˆå¯é¸ï¼Œç­†è¨˜åŒæ­¥ï¼‰

---

## ğŸš€ éƒ¨ç½²æ­¥é©Ÿ

### æ­¥é©Ÿ 1: å»ºç«‹ Supabase è³‡æ–™åº«ï¼ˆ3 åˆ†é˜ï¼‰

```bash
# 1. å‰å¾€ https://supabase.com
# 2. é»æ“Šã€ŒStart your projectã€
# 3. å»ºç«‹æ–°å°ˆæ¡ˆï¼ˆé¸æ“‡æœ€è¿‘çš„åœ°å€ï¼šSingaporeï¼‰
# 4. è¤‡è£½ Connection String

# ç¯„ä¾‹:
postgresql://postgres.xxx:[PASSWORD]@aws-0-ap-southeast-1.pooler.supabase.com:5432/postgres
```

**ç²å–é€£ç·šå­—ä¸²:**
- Settings â†’ Database â†’ Connection string â†’ Transaction (Pooling mode)

---

### æ­¥é©Ÿ 2: éƒ¨ç½²åˆ° Vercelï¼ˆ5 åˆ†é˜ï¼‰

#### æ–¹æ³• A: ä½¿ç”¨ Vercel ç¶²é ç•Œé¢ï¼ˆæ¨è–¦ï¼‰

```bash
# 1. å‰å¾€ https://vercel.com
# 2. é»æ“Šã€ŒImport Projectã€
# 3. é¸æ“‡ GitHub repository
# 4. è¨­å®šç’°å¢ƒè®Šæ•¸ï¼ˆè¦‹ä¸‹æ–¹æ¸…å–®ï¼‰
# 5. é»æ“Šã€ŒDeployã€
```

#### æ–¹æ³• B: ä½¿ç”¨ CLI

```bash
# å®‰è£ Vercel CLI
npm install -g vercel

# ç™»å…¥
vercel login

# éƒ¨ç½²
vercel --prod
```

---

### æ­¥é©Ÿ 3: è¨­å®šç’°å¢ƒè®Šæ•¸

åœ¨ Vercel Dashboard â†’ Settings â†’ Environment Variables æ–°å¢ï¼š

#### å¿…è¦è®Šæ•¸ âœ…

```bash
# è³‡æ–™åº«
DATABASE_URL=postgresql://postgres.xxx:[PASSWORD]@...
DIRECT_URL=postgresql://postgres.xxx:[PASSWORD]@...

# Auth
NEXTAUTH_SECRET=(åŸ·è¡Œ: openssl rand -base64 32)
NEXTAUTH_URL=https://your-app.vercel.app

# Google OAuth
GOOGLE_CLIENT_ID=xxx.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=xxx
```

#### å¯é¸è®Šæ•¸ï¼ˆå»ºè­°è¨­å®šï¼‰

```bash
# AI åŠŸèƒ½
OPENAI_API_KEY=sk-...
ANTHROPIC_API_KEY=sk-ant-...

# Notion åŒæ­¥
NOTION_API_KEY=secret_...

# Moodle æœå‹™ï¼ˆç¨å¾Œè¨­å®šï¼‰
MOODLE_SERVICE_URL=https://your-service.onrender.com
MOODLE_SERVICE_API_KEY=...
```

---

### æ­¥é©Ÿ 4: éƒ¨ç½² Moodle æœå‹™åˆ° Renderï¼ˆ5 åˆ†é˜ï¼‰

#### ä½¿ç”¨ Render Blueprintï¼ˆè‡ªå‹•åŒ–ï¼‰

```bash
# 1. å‰å¾€ https://render.com
# 2. é€£æ¥ GitHub å¸³è™Ÿ
# 3. é»æ“Šã€ŒNewã€â†’ã€ŒBlueprintã€
# 4. é¸æ“‡ repository
# 5. æŒ‡å®š Blueprint ä½ç½®:
#    services/moodle-service/render.yaml
# 6. é»æ“Šã€ŒApplyã€
```

#### æ‰‹å‹•è¨­å®š

```bash
# 1. New â†’ Web Service
# 2. é€£æ¥ GitHub repository
# 3. è¨­å®š:
#    - Root Directory: services/moodle-service
#    - Environment: Docker
#    - Region: Singapore
#    - Plan: Free
# 4. æ·»åŠ ç’°å¢ƒè®Šæ•¸ï¼ˆè¦‹ä¸‹æ–¹ï¼‰
# 5. Create Web Service
```

#### Render ç’°å¢ƒè®Šæ•¸

```bash
PORT=8000
API_KEY=(è‡ªå‹•ç”Ÿæˆ)
ALLOWED_ORIGINS=https://your-app.vercel.app
MOODLE_BASE_URL=https://moodle45.nccu.edu.tw
```

---

### æ­¥é©Ÿ 5: é€£æ¥æœå‹™

```bash
# 1. è¤‡è£½ Render æœå‹™ URL
#    ä¾‹: https://moodle-service-xxx.onrender.com

# 2. æ›´æ–° Vercel ç’°å¢ƒè®Šæ•¸:
MOODLE_SERVICE_URL=https://moodle-service-xxx.onrender.com
MOODLE_SERVICE_API_KEY=(å¾ Render Dashboard è¤‡è£½)

# 3. é‡æ–°éƒ¨ç½² Vercel
vercel --prod
```

---

### æ­¥é©Ÿ 6: è¨­å®š Google OAuth

```bash
# 1. å‰å¾€ https://console.cloud.google.com
# 2. APIs & Services â†’ Credentials
# 3. Create OAuth Client ID
# 4. Application type: Web application
# 5. Authorized JavaScript origins:
https://your-app.vercel.app

# 6. Authorized redirect URIs:
https://your-app.vercel.app/api/auth/callback/google

# 7. è¤‡è£½ Client ID å’Œ Secret åˆ° Vercel ç’°å¢ƒè®Šæ•¸
```

---

## âœ… é©—è­‰éƒ¨ç½²

### 1. æ¸¬è©¦ Next.js æ‡‰ç”¨

```bash
# è¨ªå•æ‚¨çš„ Vercel URL
https://your-app.vercel.app

# æ‡‰è©²çœ‹åˆ°ç™»å…¥é é¢
```

### 2. æ¸¬è©¦ Moodle æœå‹™

```bash
# è¨ªå•å¥åº·æª¢æŸ¥ç«¯é»
https://your-service.onrender.com/health

# æ‡‰è©²è¿”å›:
{"status":"healthy","service":"moodle-integration-service"}
```

### 3. æ¸¬è©¦è³‡æ–™åº«é€£ç·š

```bash
# åœ¨æœ¬åœ°åŸ·è¡Œ Prisma Studio
npm run db:studio

# æ‡‰è©²èƒ½çœ‹åˆ°ç©ºçš„è³‡æ–™åº«è¡¨æ ¼
```

---

## ğŸ”§ å¸¸è¦‹å•é¡Œ

### Q: Vercel éƒ¨ç½²å¤±æ•—ï¼Ÿ

```bash
# æª¢æŸ¥å»ºç½®æ—¥èªŒ
# Vercel Dashboard â†’ Deployments â†’ é¸æ“‡å¤±æ•—çš„éƒ¨ç½² â†’ View Build Logs

# å¸¸è¦‹åŸå› :
1. DATABASE_URL æœªè¨­å®š
2. Prisma generate å¤±æ•—
3. TypeScript éŒ¯èª¤

# è§£æ±ºæ–¹æ³•:
# ç¢ºä¿æ‰€æœ‰ç’°å¢ƒè®Šæ•¸éƒ½å·²è¨­å®š
# ç¢ºä¿ package.json çš„ postinstall åŒ…å« "prisma generate"
```

### Q: Render æœå‹™å†·å•Ÿå‹•å¤ªæ…¢ï¼Ÿ

```bash
# é€™æ˜¯å…è²»æ–¹æ¡ˆçš„æ­£å¸¸ç¾è±¡
# é–’ç½® 15 åˆ†é˜å¾Œæœƒåœæ­¢ï¼Œä¸‹æ¬¡è«‹æ±‚éœ€è¦ 30-60 ç§’å•Ÿå‹•

# è§£æ±ºæ–¹æ¡ˆ:
1. åœ¨å‰ç«¯æ·»åŠ è¼‰å…¥æç¤º
2. æˆ–å‡ç´šåˆ° Starter æ–¹æ¡ˆ ($7/æœˆ)
```

### Q: è³‡æ–™åº«é€£ç·šå¤±æ•—ï¼Ÿ

```bash
# æª¢æŸ¥:
1. DATABASE_URL æ˜¯å¦æ­£ç¢ºï¼ˆåŒ…å«å¯†ç¢¼ï¼‰
2. Supabase å°ˆæ¡ˆæ˜¯å¦åœ¨é‹è¡Œä¸­
3. æ˜¯å¦ä½¿ç”¨ Pooling mode çš„é€£ç·šå­—ä¸²

# Supabase Pooling é€£ç·šå­—ä¸²æ ¼å¼:
DATABASE_URL="postgresql://...?pgbouncer=true"
```

---

## ğŸ“Š æˆæœ¬è¿½è¹¤

### å…è²»é¡åº¦ç›£æ§

```bash
# Vercel
Dashboard â†’ Usage
- 100GB é »å¯¬/æœˆ
- ç„¡é™æ¬¡å»ºç½®

# Supabase
Dashboard â†’ Settings â†’ Usage
- 500MB è³‡æ–™åº«
- 1GB æª”æ¡ˆå„²å­˜

# Render
Dashboard â†’ Account â†’ Usage
- 750 å°æ™‚/æœˆ
- åƒ…ä½¿ç”¨ä¸€å€‹æœå‹™ = å…¨æœˆé‹è¡Œ
```

---

## ğŸ‰ å®Œæˆï¼

æ‚¨çš„ç³»çµ±ç¾åœ¨å·²ç¶“éƒ¨ç½²åˆ°é›²ç«¯äº†ï¼

### ä¸‹ä¸€æ­¥:

1. âœ… è¨ªå•æ‚¨çš„æ‡‰ç”¨ä¸¦ä½¿ç”¨ Google ç™»å…¥
2. âœ… æ¸¬è©¦ Moodle åŒæ­¥åŠŸèƒ½
3. âœ… è¨­å®š Notion å’Œå…¶ä»–æ•´åˆ
4. âœ… é‚€è«‹å…¶ä»–ä½¿ç”¨è€…

---

## ğŸ“š ç›¸é—œæ–‡æª”

- [å®Œæ•´éƒ¨ç½²æŒ‡å—](./å…è²»éƒ¨ç½²æŒ‡å—.md)
- [ç’°å¢ƒè®Šæ•¸è¨­å®š](./.env.example)
- [æœ¬åœ°é–‹ç™¼æŒ‡å—](./README.md)

---

**éƒ¨ç½²æ™‚é–“**: ~15 åˆ†é˜
**æœˆæˆæœ¬**: $0ï¼ˆå®Œå…¨å…è²»ï¼‰
**æ”¯æ´ä½¿ç”¨è€…**: å–®äººä½¿ç”¨
